# Memory: technical/news/source-preservation-logic
Updated: now

Оригінальний текст RSS-джерела зберігається в колонці `original_content` (ліміт 10000 символів) як джерело істини для ШІ. Edge-функція `scrape-news` використовує специфічні конфігурації селекторів (SOURCE_CONFIGS) для понад 20 видань (UA/INTL), застосовуючи пошук за паттернами класів та ID для вилучення контенту та видалення реклами/соцмереж без DOM-парсингу. Для обходу 403 помилок використовується ротація User-Agent та retry з експоненційною затримкою. У разі невдачі використовується фолбек на теги article/main або параграфи. Адміни можуть примусово оновити цей контент через кнопку скрейпінгу.

## Automated Scraping on Import
При імпорті RSS-новин (`fetch-rss`) виконується первинний парсинг статті через `scrape-news`. Якщо повний текст статті більший за RSS-контент, він зберігається як `original_content`. Це забезпечує максимальну якість джерела для AI-переказу.

## UI Component
`OriginalSourceBlock` показує блок з оригінальним текстом (до 2000 символів) відкритим за замовчуванням, з автоматичним розбиттям на параграфи для читабельності та напівпрозорим watermark логотипом джерела (15% opacity, 35% ширини).

## SSR Integration  
SSR-функція `ssr-render` включає `original_content` у вибірку та рендерить його як `<details>` блок для ботів.

## Image Generation
`generate-image` приймає опціональний параметр `originalContent` для контексту при генерації картинок.
