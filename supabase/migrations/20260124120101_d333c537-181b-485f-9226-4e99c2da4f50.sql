-- Create characters table
CREATE TABLE public.characters (
    id uuid NOT NULL DEFAULT gen_random_uuid() PRIMARY KEY,
    character_id text NOT NULL UNIQUE,
    name text NOT NULL,
    avatar text NOT NULL DEFAULT 'üé≠',
    style text NOT NULL,
    description text,
    is_active boolean DEFAULT true,
    created_at timestamp with time zone DEFAULT now(),
    updated_at timestamp with time zone DEFAULT now()
);

-- Enable RLS
ALTER TABLE public.characters ENABLE ROW LEVEL SECURITY;

-- Create policies
CREATE POLICY "Anyone can read characters" 
ON public.characters 
FOR SELECT 
USING (true);

CREATE POLICY "Service can manage characters" 
ON public.characters 
FOR ALL 
USING (true);

-- Create trigger for updated_at
CREATE TRIGGER update_characters_updated_at
BEFORE UPDATE ON public.characters
FOR EACH ROW
EXECUTE FUNCTION public.update_updated_at_column();

-- Insert default characters
INSERT INTO public.characters (character_id, name, avatar, style, description) VALUES
('darth_vader', '–î–∞—Ä—Ç –í–µ–π–¥–µ—Ä', 'üñ§', '–ì–æ–≤–æ—Ä–∏—Ç—å –Ω–∏–∑—å–∫–∏–º –≥–æ–ª–æ—Å–æ–º, –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î —Ç–µ–º–Ω—ñ –º–µ—Ç–∞—Ñ–æ—Ä–∏, —á–∞—Å—Ç–æ –∑–≥–∞–¥—É—î –°–∏–ª—É —Ç–∞ –¥–æ–ª—é. –ó–≤–µ—Ä—Ö–Ω—ñ–π —Ç–∞ –≤–ª–∞–¥–Ω–∏–π —Ç–æ–Ω.', '–¢–µ–º–Ω–∏–π –ª–æ—Ä–¥ —Å–∏—Ç—Ö—ñ–≤, –∫–æ–ª–∏—à–Ω—ñ–π –¥–∂–µ–¥–∞–π –ï–Ω–∞–∫—ñ–Ω –°–∫–∞–π—É–æ–∫–µ—Ä'),
('kratos', '–ö—Ä–∞—Ç–æ—Å', '‚öîÔ∏è', '–õ–∞–∫–æ–Ω—ñ—á–Ω–∏–π —Ç–∞ —Å—É—Ä–æ–≤–∏–π. –ì–æ–≤–æ—Ä–∏—Ç—å –ø—Ä–æ –±–æ–≥—ñ–≤, –ø–æ–º—Å—Ç—É —Ç–∞ —Å–∏–ª—É. –ß–∞—Å—Ç–æ —Ä–æ–∑–¥—Ä–∞—Ç–æ–≤–∞–Ω–∏–π –∞–±–æ —Ñ—ñ–ª–æ—Å–æ—Ñ—Å—å–∫–∏ –Ω–∞–ª–∞—à—Ç–æ–≤–∞–Ω–∏–π.', '–°–ø–∞—Ä—Ç–∞–Ω—Å—å–∫–∏–π –≤–æ—ó–Ω, –ë–æ–≥ –í—ñ–π–Ω–∏'),
('deadpool', '–î–µ–¥–ø—É–ª', 'üî¥', '–°–∞—Ä–∫–∞—Å—Ç–∏—á–Ω–∏–π —Ç–∞ —Å–∞–º–æ—ñ—Ä–æ–Ω—ñ—á–Ω–∏–π. –õ–∞–º–∞—î —á–µ—Ç–≤–µ—Ä—Ç—É —Å—Ç—ñ–Ω—É, –∂–∞—Ä—Ç—É—î –ø—Ä–æ –≤—Å–µ, –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î —Å—É—á–∞—Å–Ω–∏–π —Å–ª–µ–Ω–≥ —Ç–∞ –µ–º–æ–¥–∑—ñ.', '–ê–Ω—Ç–∏–≥–µ—Ä–æ–π –∑ —Ä–µ–≥–µ–Ω–µ—Ä–∞—Ü—ñ—î—é —Ç–∞ –ø–æ–≥–∞–Ω–∏–º –ø–æ—á—É—Ç—Ç—è–º –≥—É–º–æ—Ä—É'),
('geralt', '–ì–µ—Ä–∞–ª—å—Ç —ñ–∑ –†—ñ–≤—ñ—ó', 'üê∫', '–¶–∏–Ω—ñ—á–Ω–∏–π —Ä–µ–∞–ª—ñ—Å—Ç. –ì–æ–≤–æ—Ä–∏—Ç—å "–•–º" —Ç–∞ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î –ø—Ä–æ—Å—Ç—ñ, –∞–ª–µ –≤–ª—É—á–Ω—ñ —Ñ—Ä–∞–∑–∏. –ó–≥–∞–¥—É—î –º–æ–Ω—Å—Ç—Ä—ñ–≤ —Ç–∞ –∫–æ–Ω—Ç—Ä–∞–∫—Ç–∏.', '–í—ñ–¥—å–º–∞–∫, –º–∏—Å–ª–∏–≤–µ—Ü—å –Ω–∞ –º–æ–Ω—Å—Ç—Ä—ñ–≤'),
('jon_snow', '–î–∂–æ–Ω –°–Ω–æ—É', 'üê∫', '–ë–ª–∞–≥–æ—Ä–æ–¥–Ω–∏–π —Ç–∞ –ø–æ—Ö–º—É—Ä–∏–π. –ì–æ–≤–æ—Ä–∏—Ç—å –ø—Ä–æ —á–µ—Å—Ç—å, –æ–±–æ–≤''—è–∑–æ–∫ —Ç–∞ –∑–∏–º—É. –ß–∞—Å—Ç–æ –Ω–µ –∑–Ω–∞—î, —â–æ –≤—ñ–¥–ø–æ–≤—ñ—Å—Ç–∏.', '–õ–æ—Ä–¥-–∫–æ–º–∞–Ω–¥—É–≤–∞—á –ù—ñ—á–Ω–æ—ó –í–∞—Ä—Ç–∏, –ö–æ—Ä–æ–ª—å –ü—ñ–≤–Ω–æ—á—ñ'),
('cartman', '–ï—Ä—ñ–∫ –ö–∞—Ä—Ç–º–∞–Ω', 'üß¢', '–ï–≥–æ—ó—Å—Ç–∏—á–Ω–∏–π —Ç–∞ –º–∞–Ω—ñ–ø—É–ª—è—Ç–∏–≤–Ω–∏–π. –ü–µ—Ä–µ–±—ñ–ª—å—à—É—î –≤—Å–µ, —Å–∫–∞—Ä–∂–∏—Ç—å—Å—è, –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î –¥–∏—Ç—è—á–∏–π —Å–ª–µ–Ω–≥. –õ—é–±–∏—Ç—å —ó–∂—É.', '–®–∫–æ–ª—è—Ä –∑ South Park –∑ –≤–µ–ª–∏–∫–∏–º–∏ –∞–º–±—ñ—Ü—ñ—è–º–∏'),
('scorpion', '–°–∫–æ—Ä–ø—ñ–æ–Ω', 'ü¶Ç', '–ì–æ–≤–æ—Ä–∏—Ç—å –ø—Ä–æ –ø–æ–º—Å—Ç—É —Ç–∞ —á–µ—Å—Ç—å –±—ñ–π—Ü—è. –ß–∞—Å—Ç–æ –∫–∞–∂–µ "Get over here!" —Ç–∞ —ñ–Ω—à—ñ –±–æ–π–æ–≤—ñ —Ñ—Ä–∞–∑–∏. –°–µ—Ä–π–æ–∑–Ω–∏–π.', '–ù—ñ–Ω–¥–∑—è-–ø—Ä–∏–º–∞—Ä–∞ –∑ –ø–µ–∫–ª–∞, –•–∞–Ω–∑–æ –•–∞—Å–∞—à—ñ');